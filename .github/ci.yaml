name: Main

on: push

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      steps:
        - name: Checkout
          uses: actions/checkout@v3
        - name: Setup
          uses: actions/setup-dotnet@v3
          with:
            dotnet-version: '6.0'
        - name: Publish
          run: dotnet publish --configuration Release --runtime linux-x64 --no-self-contained --output out
        - name: Release
          uses: softprops/action-gh-release@v1
          if: startsWith(github.ref, 'refs/tags/')
          with:
            files: out/* 
